# 비트코인 거래소 지갑 구조 학습 노트

---

## 1. 핵심 원칙

> **"Private Key를 가진 사람만 코인을 움직일 수 있다."**

---

## 2. Private Key = 절대 권한

- Private Key는 **256비트 랜덤 숫자**에 불과하다
- 이 숫자를 아는 사람은 해당 주소의 코인을 **전부 이동**시킬 수 있다
- 블록체인에서 그 행동은 **정상으로 인정**된다
- **되돌릴 방법이 없다**

| 은행 | 비트코인 |
|------|----------|
| 취소 가능 | 취소 불가 |
| 중앙기관이 통제 | 키 소유자만 통제 |

---

## 3. 거래소 = 키 관리자

```
거래소가 보유한 1만 BTC
        ↓
특정 Private Key들이 통제하고 있는 것
        ↓
거래소 = 키 보관 회사 (블록체인 회사가 아님)
```

---

## 4. 세 가지 구성요소

| 구성요소 | 역할 | 설명 |
|----------|------|------|
| **Private Key (비밀키)** | 서명 생성 | 출금 시 필요. 절대 비공개 |
| **Public Key (공개키)** | 서명 검증 | 비밀키에서 생성됨. 공개해도 안전 |
| **Address (주소)** | 계좌번호 | 공개키를 해시한 값. 주소만으로는 출금 불가 |

### 도장 비유로 이해하기

```
비밀키  =  도장 자체
공개키  =  도장 모양 샘플
서명    =  찍힌 도장 자국

네트워크의 검증 방식:
"이 도장 자국이 이 도장 모양에서 나온 게 맞는가?"
→ 도장(비밀키) 자체는 절대 보지 않는다
```

---

## 5. 트랜잭션 흐름

```
① "이 코인을 저 주소로 보내겠다" 데이터 생성
          ↓
② Private Key로 서명
          ↓
③ 네트워크가 Public Key로 검증
          ↓
④ 유효하면 블록에 포함 → 코인 이동 완료
```

> 서명이 통과하면 코인은 이동한다.  
> 이를 막을 수 있는 중앙기관은 없다.

---

## 6. Hot Wallet vs Cold Wallet

비밀키가 털리면 즉시 전액 이동이 가능하기 때문에  
**"그 키를 어디에 둘 것인가?"** 라는 문제가 생긴다.

| 구분 | Hot Wallet | Cold Wallet |
|------|------------|-------------|
| 연결 상태 | 서버에 연결 (온라인) | 완전 오프라인 |
| 출금 처리 | 자동 처리 가능 | 수동 처리 |
| 보안 | 해킹 위험 높음 | 안전 |
| 속도 | 빠름 | 느림 |

> **비밀키가 곧 자산이다.**  
> 전 자산을 Hot Wallet에 두면 해킹 한 번으로 전액 소실 가능.

---

## 7. Multi-Sig (다중 서명)

비밀키가 하나뿐이면 그 키를 훔친 사람이 거래소 전체 자산을 통제할 수 있다.

```
일반 구조:
비밀키 1개 → 1명이 단독 출금 가능 → 내부자 공격 위험

2-of-3 Multi-Sig 구조:
3개의 키 중 2개가 있어야 출금 가능
→ 내부자 1명이 단독으로 자산을 빼낼 수 없다
→ 키 1개가 유출되어도 자산은 안전
```

---

## 8. HD Wallet (계층 결정적 지갑)

거래소는 사용자마다 고유한 입금 주소를 부여해야 한다.

```
사용자 100만 명 = 주소 100만 개 필요

❌ 비밀키 100만 개를 각각 관리 → 사실상 지옥
✅ 마스터 키 1개로 무한히 주소 파생 → HD Wallet
```

---

## 9. 전체 요약

> 비트코인은 Private Key 소유자가 자산의 모든 권한을 가진다.  
> 거래소는 그 키를 대신 보관하는 구조이기 때문에  
> **키 관리 설계가 곧 거래소 보안의 전부**다.